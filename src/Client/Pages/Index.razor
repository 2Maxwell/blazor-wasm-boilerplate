@page "/home"
@page "/"
@using System.Security.Claims
@inject Microsoft.Extensions.Localization.IStringLocalizer<Index> _localizer

<FshTitle Title="@_localizer["Home"]" Description="@_localizer["Hello World!"]" />


<ErrorBoundary>
    <ChildContent>
        <MudExpansionPanel
            Style="padding:10px!important; margin-bottom:10px!important;border-radius: var(--mud-default-borderradius) !important;"
            Class="mud-elevation-25" Text="Claims">
            <MudList Dense="true">
                @if (Claims is not null)
                {
                    @foreach (var claim in Claims)
                    {
                        <MudListItem>
                            <MudChip>
                                @claim.Type
                            </MudChip>
                            @claim.Value
                        </MudListItem>
                    }
                }
            </MudList>
        </MudExpansionPanel>
    </ChildContent>
</ErrorBoundary>

@code {
    [CascadingParameter]
    public Task<AuthenticationState> AuthState { get; set; } = default!;

    public IEnumerable<Claim>? Claims { get; set; }

    protected override async Task OnInitializedAsync()
    {
        var authState = await AuthState;
        Claims = authState.User.Claims;
    }
}