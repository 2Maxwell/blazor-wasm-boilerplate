@using FSH.BlazorWebAssembly.Client.Pages.Shop
@inject IStringLocalizer<DeleteConfirmation> L
@inject IResQueryClient ResQueryClient

<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">
            <MudIcon Icon="@Icons.Material.Filled.People" Class="mr-3 mb-n1" />
            @L["Room Occupancy"]
        </MudText>
    </TitleContent>

    <DialogContent>

        <MudGrid>

            <MudItem xs="3" Class="mt-4">
                <MudText Class="pt-4" Typo="Typo.button">@L["Room 1"]</MudText>
            </MudItem>
            <MudItem xs="1"></MudItem>
            <MudItem xs="4">
                <MudNumericField T="int" @bind-Value="@paxes[0].Adult" Label="@L["Adult"]" ReadOnly="true" Variant="Variant.Outlined" Margin="Margin.Dense" />

            </MudItem>
            <MudItem xs="4">
                <MudNumericField T="int" Value="@paxes[0].Children.Count()" Label="@L["Child(s)"]" ReadOnly="true" Variant="Variant.Outlined" Margin="Margin.Dense" />
            </MudItem>

            @if (paxes[0].Children.Count() >= 1)
            {
                <MudItem xs="1"></MudItem>

                <MudItem xs="3" Class="mt-4">
                    <MudText Typo="Typo.button">@L["Child 1"]</MudText>
                </MudItem>

                <MudItem xs="4">
                    <MudNumericField T="int" @bind-Value="@childsR1[0].Age" Label="@L["Age"]" Variant="Variant.Outlined" Margin="Margin.Dense" />
                </MudItem>
                @if (childsR1[0].Age <= 12)
                {
                    <MudItem xs="4">
                        <MudCheckBox T="bool" @bind-Checked="@childsR1[0].ExtraBed" Label="@L["ExtraBed"]" Variant="Variant.Outlined" Margin="Margin.Dense" />
                    </MudItem>
                }
                @if (childsR1[0].Age > 12)
                {
                    childsR1[0].ExtraBed = true;
                    <MudItem xs="4">
                        <MudCheckBox T="bool" Checked="@childsR1[0].ExtraBed" Disabled="true" Label="@L["ExtraBed"]" Variant="Variant.Outlined" Margin="Margin.Dense" />
                    </MudItem>
                }
            }

            @if (paxes[0].Children.Count() >= 2)
            {
                <MudItem xs="1"></MudItem>

                <MudItem xs="3" Class="mt-4">
                    <MudText Typo="Typo.button">@L["Child 2"]</MudText>
                </MudItem>

                <MudItem xs="4">
                    <MudNumericField T="int" @bind-Value="@childsR1[1].Age" Label="@L["Age"]" Variant="Variant.Outlined" Margin="Margin.Dense" />
                </MudItem>
                <MudSpacer></MudSpacer>
                @if (childsR1[1].Age <= 12)
                {
                    <MudItem xs="4">
                        <MudCheckBox T="bool" @bind-Checked="@childsR1[1].ExtraBed" Label="@L["ExtraBed"]" Variant="Variant.Outlined" Margin="Margin.Dense" />
                    </MudItem>
                }
                @if (childsR1[1].Age > 12)
                {
                    childsR1[1].ExtraBed = true;
                    <MudItem xs="4">
                        <MudCheckBox T="bool" Checked="@childsR1[1].ExtraBed" Disabled="true" Label="@L["ExtraBed"]" Variant="Variant.Outlined" Margin="Margin.Dense" />
                    </MudItem>
                }
            }

            @if (paxes[0].Children.Count() >= 3)
            {
                <MudItem xs="1"></MudItem>

                <MudItem xs="3" Class="mt-4">
                    <MudText Typo="Typo.button">@L["Child 3"]</MudText>
                </MudItem>

                <MudItem xs="4">
                    <MudNumericField T="int" @bind-Value="@childsR1[2].Age" Label="@L["Age"]" Variant="Variant.Outlined" Margin="Margin.Dense" />
                </MudItem>
                <MudSpacer></MudSpacer>
                @if (childsR1[2].Age <= 12)
                {
                    <MudItem xs="4">
                        <MudCheckBox T="bool" @bind-Checked="@childsR1[2].ExtraBed" Label="@L["ExtraBed"]" Variant="Variant.Outlined" Margin="Margin.Dense" />
                    </MudItem>
                }
                @if (childsR1[2].Age > 12)
                {
                    childsR1[2].ExtraBed = true;
                    <MudItem xs="4">
                        <MudCheckBox T="bool" Checked="@childsR1[2].ExtraBed" Disabled="true" Label="@L["ExtraBed"]" Variant="Variant.Outlined" Margin="Margin.Dense" />
                    </MudItem>
                }
            }

            @if (paxes[0].Children.Count() >= 4)
            {
                <MudItem xs="1"></MudItem>

                <MudItem xs="3" Class="mt-4">
                    <MudText Typo="Typo.button">@L["Child 4"]</MudText>
                </MudItem>

                <MudItem xs="4">
                    <MudNumericField T="int" @bind-Value="@childsR1[3].Age" Label="@L["Age"]" Variant="Variant.Outlined" Margin="Margin.Dense" />
                </MudItem>
                <MudSpacer></MudSpacer>
                @if (childsR1[3].Age <= 12)
                {
                    <MudItem xs="4">
                        <MudCheckBox T="bool" @bind-Checked="@childsR1[3].ExtraBed" Label="@L["ExtraBed"]" Variant="Variant.Outlined" Margin="Margin.Dense" />
                    </MudItem>
                }
                @if (childsR1[3].Age > 12)
                {
                    childsR1[3].ExtraBed = true;
                    <MudItem xs="4">
                        <MudCheckBox T="bool" Checked="@childsR1[3].ExtraBed" Disabled="true" Label="@L["ExtraBed"]" Variant="Variant.Outlined" Margin="Margin.Dense" />
                    </MudItem>
                }
            }

            @if (paxes[0].Children.Count() >= 5)
            {
                <MudItem xs="1"></MudItem>

                <MudItem xs="3" Class="mt-4">
                    <MudText Typo="Typo.button">@L["Child 5"]</MudText>
                </MudItem>

                <MudItem xs="4">
                    <MudNumericField T="int" @bind-Value="@childsR1[4].Age" Label="@L["Age"]" Variant="Variant.Outlined" Margin="Margin.Dense" />
                </MudItem>
                <MudSpacer></MudSpacer>
                @if (childsR1[4].Age <= 12)
                {
                    <MudItem xs="4">
                        <MudCheckBox T="bool" @bind-Checked="@childsR1[4].ExtraBed" Label="@L["ExtraBed"]" Variant="Variant.Outlined" Margin="Margin.Dense" />
                    </MudItem>
                }
                @if (childsR1[4].Age > 12)
                {
                    childsR1[4].ExtraBed = true;
                    <MudItem xs="4">
                        <MudCheckBox T="bool" Checked="@childsR1[4].ExtraBed" Disabled="true" Label="@L["ExtraBed"]" Variant="Variant.Outlined" Margin="Margin.Dense" />
                    </MudItem>
                }
            }

        </MudGrid>

    </DialogContent>

    <DialogActions>
        <MudButton StartIcon="@Icons.Filled.Cancel" OnClick="Cancel">@L["Cancel"]</MudButton>
        <MudButton StartIcon="@Icons.Filled.Delete" Color="Color.Error" Variant="Variant.Filled" OnClick="Submit">@L["Confirm"]</MudButton>
    </DialogActions>
</MudDialog>



@code {

    [CascadingParameter]
    MudDialogInstance MudDialog { get; set; } = default!;
    [Parameter]
    public List<Pax> paxes { get; set; }
    [Parameter]
    public List<Child> childsR1 { get; set; }
    // private PaxHandler paxHandler { get; set; } = new();

    void Submit()
    {
        paxes[0].Children = childsR1;
        MudDialog.Close(DialogResult.Ok(paxes));
    }
    void Cancel() => MudDialog.Cancel();



}
